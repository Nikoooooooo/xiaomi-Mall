<!DOCTYPE html>
<html xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>小米</title>
    <!--网页的图标-->
    <link rel="icon" href="images/favicon.ico">
    <!--全局样式-->
    <link rel="stylesheet" href="css/reset.css">
    <!--字体图标-->
    <link rel="stylesheet" href="css/iconfont.css">
    <!--自己的样式-->
    <link rel="stylesheet" href="css/mi.css">
    <style>
        [v-cloak]{
            display:none !important;
        }
    </style>
    <script src="js/vue.js"></script>

</head>
<body>
<!--loading样式-->
<!--<div class="loading" v-show="!phones.length" id="loading">-->
<!--    <img src="images/loading.gif">-->
<!--</div>-->
<!--头部开始-->

<div class="header" id="yc-header">
        <div class="wrap">
            <ul class="header-left">
                <li><a href="#">大米商城</a><span>|</span></li>
                <li><a href="#">MIUI</a><span>|</span></li>
                <li><a href="#">loT</a><span>|</span></li>
                <li><a href="#">云服务</a><span>|</span></li>
                <!--            <li><a href="#">天星数科</a><span>|</span></li>-->
                <!--            <li><a href="#">有品</a><span>|</span></li>-->
                <!--            <li><a href="#">小爱开放平台</a><span>|</span></li>-->
                <!--            <li><a href="#">企业团购</a><span>|</span></li>-->
                <!--            <li><a href="#">资质证照</a><span>|</span></li>-->
                <!--            <li><a href="#">协议规则</a><span>|</span></li>-->
                <li>
                    <a href="#">下载app</a><span>|</span>
                    <div class="download">
                        <a href="#">
                            <img src="images/78c30d4f259ed43ab20e810a522a6249.png" alt="">
                            <p>小米商城APP</p>
                        </a>
                    </div>
                    <div class="triangle"></div>
                </li>
                <li><a href="#">智能生活</a><span>|</span></li>
                <li><a href="login-1.html">管理者平台</a></li>
            </ul>
            <ul class="header-right">
                <li class="login_info" v-if="onlogin" href="#">欢迎:<em>{{loginName}}</em></li>
                <li class="login_info" v-if="onlogin" ><a href="orderList.html">查看我的订单</a></li>
                <li class="quit" v-if="onlogin"  @click="quit"><a href="#"><span>|</span>退出登录</a></li>
                <li class="login_btn" v-if="outlogin"><a href="login.html" >登录</a><span>|</span></li>
                <li class="reg_btn" v-if="outlogin"><a href="reg.html">注册</a><span>|</span></li>
                <li class="cart">
                    <a href="cart.html">
                        <i class="iconfont">&#xe653;</i>
                        购物车({{goodsCount}})
                    </a>
                    <div class="cart-list">
                        <p v-show="checkGoodsCount" ><img src="static/member/img/shop.png"/> 购物车中暂无数据</p>
                        <ul class="cart-list-info" v-show="checkGoodsCountNotNull">
                            <li v-for="good in goods">
                                <img :src="'../'+good.pics" height="100px" width="100px" style="float: left">
                                <h5>{{good.name}}&nbsp;&nbsp;&nbsp;&nbsp;颜色:{{good.color}}&nbsp;&nbsp;&nbsp;&nbsp;规格:{{good.cap}}
                                    &nbsp;&nbsp;&nbsp;&nbsp;${{good.price}}</h5>

                            </li>
                        </ul>
                    </div>
                </li>

                <li class="address" >
                    <a href="#">
                        添加地址
                    </a>
                    <div class="address-list">
                        <label>省份：</label>
                        <select id="province" @change="changeCity"  v-model="provinceid">
                            <option value=""></option>
                        </select>
                        <label>城市：</label>
                        <select id="city" v-html="cityOp" @change="changeCounty" v-model="cityid">
                            <option value=""></option>
                        </select>
                        <label>区/县：</label>
                        <select id="county" v-html="countyOp" v-model="countyid">
                            <option value=""></option>
                        </select>
                        </br>
                        <div >
                            <label>详细地址&nbsp;&nbsp;&nbsp;&nbsp;:</label>
                            <input type="text" placeholder="请输入详细地址" v-model="detailAdd" @input="checkInput1">
                            </br>
                            <p class="error_tip1" v-show="showErrorTip1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;详细地址长度需要在5-120个汉字或字符</p>
                        </div>
                        <div>
                            <label>收货人姓名:</label>
                            <input  type="text" placeholder="请输入收货人姓名" v-model="receiveName" @input="checkInput2">
                            </br>
                            <p class="error_tip2" v-show="showErrorTip2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;收货人姓名长度需要在2-25个汉字或字符之间</p>
                        </div>
                        <div >
                            <label id="input_tel">电话号码&nbsp;&nbsp;&nbsp;&nbsp;:</label>
                            <input type="text" placeholder="请输入收货人电话" v-model="receiveTel" @input="checkInput3">
                            </br>
                            <p class="error_tip3"  v-show="showErrorTip3">电话号码不符合规格</p>
                        </div>
                        <button type="button" id="addAddress" href="#" @click="addAddress">添加</button>
                    </div>
                </li>
            </ul>
        </div>
    </div>
<!--头部结束-->
<!--导航开始-->
<div id="yc-search" v-cloak >
<div class="nav">
    <div class="wrap">
        <div class="logo">
            <a href="index.html">
                <img src="images/logo-mi2.png" alt="">
            </a>
        </div>
        <div class="nav-bar">
            <ul>
                <li> <a>&nbsp;&nbsp;&nbsp;</a></li>
                <li><a>&nbsp;&nbsp;&nbsp;</a></li>
                <li>
                    <a href="#">爆款推荐</a>
                    <div class="nav-bar-list">
                        <div class="wrap">
                            <ul>
                                <li>
                                    <a href="#"   @click="shiftDetail(110)" >
                                        <div class="img-box">
                                            <img src="images/20230710161416.png" alt="">
                                        </div>
                                        <p class="name1">小米 MIX Fold</p>
                                        <p class="price1">6599元起</p>
                                    </a>
                                </li>
                                <li>
                                    <a href="#"   @click="shiftDetail(8)"  >
                                        <div class="img-box">
                                            <img src="images/20230709163344.png" alt="">
                                        </div>
                                        <p class="name1">华为 Mate 50 Pro</p>
                                        <p class="price1">5299元起</p>
                                    </a>
                                </li>
                                <li>
                                    <a href="#"   @click="shiftDetail(109)"  >
                                        <div class="img-box">
                                            <img src="images/20230710161112.png" alt="">
                                        </div>
                                        <p class="name1">苹果14 Pro Max</p>
                                        <p class="price1">8488元起</p>
                                    </a>
                                </li>
                                <li>
                                    <a href="#"  @click="shiftDetail(28)"   >
                                        <div class="img-box">
                                            <img src="images/20230710143753.png" alt="">
                                        </div>
                                        <p class="name1">VIVO X80 Pro</p>
                                        <p class="price1">5999元起</p>
                                    </a>
                                </li>
                                <li>
                                    <a href="#"   @click="shiftDetail(42)"  >
                                        <div class="img-box">
                                            <img src="images/20230710150416.png" alt="">
                                        </div>
                                        <p class="name1">OPPO Find N2</p>
                                        <p class="price1">7299元起</p>
                                    </a>
                                </li>
                                <li>
                                    <a href="#"   @click="shiftDetail(1)"  >
                                        <div class="img-box">
                                            <img src="images/20230709160407.png" alt="">
                                        </div>
                                        <p class="name1">华为 Mate X3</p>
                                        <p class="price1">15338元起</p>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <!--                <li>-->
                <!--                    <a href="#">新品推荐</a>-->
                <!--                    <div class="nav-bar-list">-->
                <!--                        <div class="wrap">-->
                <!--                            <ul>-->
                <!--                                <li>-->
                <!--                                    <a href="#">-->
                <!--                                        <div class="img-box">-->
                <!--                                            <img src="images/88bb84ff06f0ab467b859aeed36b817a.webp" alt="">-->
                <!--                                        </div>-->
                <!--                                        <p class="name1">小米11 Pro</p>-->
                <!--                                        <p class="price1">4499元起</p>-->
                <!--                                    </a>-->
                <!--                                </li>-->
                <!--                                <li>-->
                <!--                                    <a href="#">-->
                <!--                                        <div class="img-box">-->
                <!--                                            <img src="images/a1c45eadcedeb27b1cafca0359422da9.webp" alt="">-->
                <!--                                        </div>-->
                <!--                                        <p class="name1">小米11 Pro</p>-->
                <!--                                        <p class="price1">4499元起</p>-->
                <!--                                    </a>-->
                <!--                                </li>-->
                <!--                                <li>-->
                <!--                                    <a href="#">-->
                <!--                                        <div class="img-box">-->
                <!--                                            <img src="images/a1c45eadcedeb27b1cafca0359422da9.webp" alt="">-->
                <!--                                        </div>-->
                <!--                                        <p class="name1">小米11 Pro</p>-->
                <!--                                        <p class="price1">4499元起</p>-->
                <!--                                    </a>-->
                <!--                                </li>-->
                <!--                                <li>-->
                <!--                                    <a href="#">-->
                <!--                                        <div class="img-box">-->
                <!--                                            <img src="images/a1c45eadcedeb27b1cafca0359422da9.webp" alt="">-->
                <!--                                        </div>-->
                <!--                                        <p class="name1">小米11 Pro</p>-->
                <!--                                        <p class="price1">4499元起</p>-->
                <!--                                    </a>-->
                <!--                                </li>-->
                <!--                                <li>-->
                <!--                                    <a href="#">-->
                <!--                                        <div class="img-box">-->
                <!--                                            <img src="images/a1c45eadcedeb27b1cafca0359422da9.webp" alt="">-->
                <!--                                        </div>-->
                <!--                                        <p class="name1">小米11 Pro</p>-->
                <!--                                        <p class="price1">4499元起</p>-->
                <!--                                    </a>-->
                <!--                                </li>-->
                <!--                                <li>-->
                <!--                                    <a href="#">-->
                <!--                                        <div class="img-box">-->
                <!--                                            <img src="images/a1c45eadcedeb27b1cafca0359422da9.webp" alt="">-->
                <!--                                        </div>-->
                <!--                                        <p class="name1">小米11 Pro</p>-->
                <!--                                        <p class="price1">4499元起</p>-->
                <!--                                    </a>-->
                <!--                                </li>-->
                <!--                            </ul>-->
                <!--                        </div>-->
                <!--                    </div>-->
                <!--                </li>-->
                <li><a href="orderList.html">我的订单</a></li>
                <li><a href="cart.html" >我的购物车</a></li>
                <li><a href="#">智能硬件</a></li>
                <li><a href="#">服务</a></li>
                <li><a href="#">社区</a></li>
            </ul>
        </div>
        <div class="search">
<!-- 搜索框-->
            <input type="text" v-model="searchBrand"   @keyup="searchFunction"  id="searchInput">
            <a href="#" class="iconfont" @click="findBrand()"  >&#xe63d; </a>
            <div class="search-list" id="searchContent" >
                <a href="#" @click="selectList('苹果')" >苹果</a>
                <a href="#"  @click="selectList('华为')" >华为</a>
                <a href="#"   @click="selectList('OPPO')" >OPPO</a>
                <a href="#"  @click="selectList('小米')" >小米</a>
                <a href="#"   @click="selectList('VIVO')" >VIVO</a>
            </div>
        </div>
    </div>
</div>
<!--导航结束-->
<!--banner开始-->
<div class="banner">
<!--广告结束-->
<!--主体开始-->
<div class="container">
    <div class="wrap">
        <!--手机开始-->                                <!--导航栏部分-->
        <div class="phone" >
            <div class="home-banner-box">
                <div class="filter-first">
                    <ul class="classify" >
                        <li class="classify-active">
                            <span class="label">分类:</span>
                        </li>
                        <li>
                            <a class="product-type-item1" href="#"  @click="selectBrand('全部')"  >全部</a>
                        </li>
                        <li  v-cloak>
                            <a class="product-type-item2" href="#"   @click="findByTag(1)"  >新品推荐</a>
                        </li>
                        <li  v-cloak>
                            <a class="product-type-item2" href="#"   @click="findByTag(2)"  >经典机型</a>
                        </li>


                    </ul>
                </div>


            </div>
            <ul class="title">
               <li>
                   <a href="#" @click="findSort(3)" >新品</a>
               </li>
               <li>
                   <a href="#" @click="findSort(2)">销量</a>
               </li>
               <li>
                   <a href="#" @click="findSort(1)">价格</a>
               </li>
            </ul>
            <div class="home-box">
                <div class="home-box-left home-box-left1">
                    <a href="#">
                        <img src="images/c583f2edc613f1be20fa415910b13ce3.webp" alt="">
                    </a>
                </div>
                <div class="home-box-right"   >
                    <ul  >
                        <p v-if="pagePhones.length==0" class="notFind">没有查到数据哦</p>
                        <li class="items" v-for="phone in pagePhones" >
                            <a href="#"  @click="shiftDetail(phone.pid)" id="link">
                                <img :src="'../'+phone.pics" alt="" class="img1">
                                <p class="name2">{{phone.name}}</p>
                                <p class="price2">{{phone.price}}元起</p>
                            </a>

                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!--智能结束-->
        <!--视频开始-->
        <div class="video">
            <div class="home-banner-box" >
                <div class="paging"v-for="i in totalPage">
                <a href="javascript:void(0)" @click="findPage(i)" v-if="i==pageNo">{{i}}</a>
                <a href="javascript:void(0)" @click="findPage(i)" v-else>{{i}}</a>
            </div>
            </div>
            <h2 class="title-button">
                猜你喜欢
            </h2>
            <div class="video-box">
                <ul>
                    <li class="video-items" v-for="Bphone in phoneBottom">
                        <a href="#"    @click="shiftBottomDetail(Bphone.pid)" id="Blink" >
                            <div class="video-img" >
                                <img :src="'../'+Bphone.pics" alt="" >
                            </div>
                            <div class="recommend-name" >{{Bphone.name}}</div>
                            <div class="recommend-price" >{{Bphone.price}}元起</div>
                        </a>
                    </li>
<!--                    <li class="video-items">-->
<!--                        <a href="#">-->
<!--                            <div class="video-img">-->

<!--                                <div class="play">-->
<!--                                    <span></span>-->
<!--                                </div>-->

<!--                            </div>-->
<!--                            <div class="recommend-name">名字</div>-->
<!--                            <div class="recommend-price">价格</div>-->
<!--                        </a>-->
<!--                    </li>-->


                </ul>
            </div>
        </div>
        <!--视频结束-->
    </div>
</div>
<!--主体结束-->
<!--页脚开始-->
<div class="footer">
    <div class="site-footer">
        <div class="wrap">
            <div class="footer-service">
                <ul>
                    <li>
                        <a href="#">
                            <i class="iconfont">&#xe606;</i>
                            <span>15天免费换货</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="iconfont">&#xe606;</i>
                            <span>15天免费换货</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="iconfont">&#xe606;</i>
                            <span>15天免费换货</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="iconfont">&#xe606;</i>
                            <span>15天免费换货</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="iconfont">&#xe606;</i>
                            <span>15天免费换货</span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="footer-links">
                <ul>
                    <li>
                        帮助中心
                    </li>
                    <li>
                        <a href="#">账户管理</a>
                    </li>
                    <li>
                        <a href="#">账户管理</a>
                    </li>
                    <li>
                        <a href="#">账户管理</a>
                    </li>
                </ul>
                <ul>
                    <li>
                        帮助中心
                    </li>
                    <li>
                        <a href="#">账户管理</a>
                    </li>
                    <li>
                        <a href="#">账户管理</a>
                    </li>
                    <li>
                        <a href="#">账户管理</a>
                    </li>
                </ul>
                <ul>
                    <li>
                        帮助中心
                    </li>
                    <li>
                        <a href="#">账户管理</a>
                    </li>
                    <li>
                        <a href="#">账户管理</a>
                    </li>
                    <li>
                        <a href="#">账户管理</a>
                    </li>
                </ul>
                <ul>
                    <li>
                        帮助中心
                    </li>
                    <li>
                        <a href="#">账户管理</a>
                    </li>
                    <li>
                        <a href="#">账户管理</a>
                    </li>
                    <li>
                        <a href="#">账户管理</a>
                    </li>
                </ul>
                <ul>
                    <li>
                        帮助中心
                    </li>
                    <li>
                        <a href="#">账户管理</a>
                    </li>
                    <li>
                        <a href="#">账户管理</a>
                    </li>
                    <li>
                        <a href="#">账户管理</a>
                    </li>
                </ul>
                <ul>
                    <li>
                        帮助中心
                    </li>
                    <li>
                        <a href="#">账户管理</a>
                    </li>
                    <li>
                        <a href="#">账户管理</a>
                    </li>
                    <li>
                        <a href="#">账户管理</a>
                    </li>
                </ul>
                <div class="contact">
                    <p class="tel">400-100-5678</p>
                    <p class="time">8:00-18:00（仅收市话费）</p>
                    <a href="#" class="kefu">
                        <i class="iconfont">&#xe710;</i>
                        人工客服
                    </a>
                    <p class="follow">
                        关注小米：
                        <span class="wb"></span>
                        <span class="wx"></span>
                        <img src="images/wx-img.png" alt="" class="wx-img">
                    </p>
                </div>
            </div>
        </div>
    </div>
    </div>
    <div class="site-info">
        <div class="wrap">
            <div class="footer-logo">
                <img src="images/logo-mi2.png" alt="">
            </div>
            <div class="sites">
                <p>
                    <a rel="nofollow" href="//www.mi.com/index.html" target="_blank">小米商城</a>
                    <span class="sep">|</span>
                    <a rel="nofollow" href="//www.miui.com/" target="_blank">MIUI</a>
                    <span class="sep">|</span>
                    <a rel="nofollow" href="//home.mi.com/index.html" target="_blank">米家</a>
                    <span class="sep">|</span>
                    <a rel="nofollow" href="http://www.miliao.com/" target="_blank">米聊</a>
                    <span class="sep">|</span>
                    <a rel="nofollow" href="//www.duokan.com/" target="_blank">多看</a>
                    <span class="sep">|</span>
                    <a rel="nofollow" href="//game.xiaomi.com/" target="_blank">游戏</a>
                    <span class="sep">|</span>
                    <a rel="nofollow" href="//b.mi.com/?client_id=180100031058&masid=17409.0358" target="_blank">政企服务</a>
                    <span class="sep">|</span>
                    <a rel="nofollow" href="//xiaomi.tmall.com/" target="_blank">小米天猫店</a>
                    <span class="sep">|</span>
                    <a rel="nofollow" href="//privacy.mi.com/all/zh_CN/" target="_blank">小米集团隐私政策</a>
                    <span class="sep">|</span>
                    <a rel="nofollow" href="//cdn.cnbj1.fds.api.mi-img.com/mi-mall/f516fe9e2c01.html" target="_blank">小米公司儿童信息保护规则</a>
                    <span class="sep">|</span>
                    <a rel="nofollow" href="//cdn.cnbj1.fds.api.mi-img.com/mi-mall/ded8d0e4a77d.html" target="_blank">小米商城隐私政策</a>
                    <span class="sep">|</span>
                    <a rel="nofollow" href="//www.mi.com/about/user-agreement/" target="_blank">小米商城用户协议</a>
                    <span class="sep">|</span>
                    <a rel="nofollow" href="//static.mi.com/feedback/" target="_blank">问题反馈</a>
                    <span class="sep">|</span>
                    <a rel="nofollow" href="javascript:void(0);" class="J_siteGlobalRegion">Select Location</a>
                    <br>
                    <a rel="nofollow" href="http://www.mi.com/beihu" target="_blank">北京互联网法院法律服务工作站</a>
                    <span class="sep">|</span>
                    <a rel="nofollow" href="http://www.cca.org.cn/" target="_blank">中国消费者协会</a>
                    <span class="sep">|</span>
                    <a rel="nofollow" href="http://www.bj315.org/" target="_blank">北京市消费者协会</a>
                </p>
                <p>
                    ©
                    <a href="javascript:;" target="_blank" title="mi.com">mi.com</a> 京ICP证110507号
                    <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow">京ICP备10046444号</a>
                    <a rel="nofollow" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010802020134" target="_blank">京公网安备11010802020134号</a>
                    <a href="//www.mi.com/culture-license/" target="_blank">京网文[2020]0276-042号</a>
                    <br>
                    <a href="//www.mi.com/medical/record/" target="_blank">（京）网械平台备字（2018）第00005号</a>
                    <a href="//www.mi.com/medical/qualification/" target="_blank">互联网药品信息服务资格证 (京)-非经营性-2014-0090</a>
                    <a href="//www.mi.com/business-license/" target="_blank">营业执照</a>
                    <a href="//www.mi.com/medical/list/" target="_blank">医疗器械质量公告</a>
                    <br>
                    <a href="https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/e0c7d4cf3b7cd88de10196e30c92e020.png" target="_blank">增值电信业务许可证</a>&nbsp;网络食品经营备案 京食药网食备202010048 &nbsp;
                    <a href="https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/c6859168166651511897f54fa1047fe3.png" target="_blank">食品经营许可证</a>
                    <br>
                    违法和不良信息举报电话：171-5104-4404&nbsp;<a href='https://www.mi.com/intellectual' target="_blank">知识产权侵权投诉</a>&nbsp;本网站所列数据，除特殊说明，所有数据均出自我司实验室测试
                </p>
                <p>
                    <img src="images/truste.png" alt="">
                    <img src="images/truste.png" alt="">
                    <img src="images/truste.png" alt="">
                    <img src="images/truste.png" alt="">
                    <img src="images/truste.png" alt="">
                </p>
            </div>
            <img src="images/slogan2020.png" alt="" class="slogan">
        </div>
    </div>
</div>
</div>

<!--页脚结束-->

<!--<script src="js/vue.js"></script>-->
<script src="js/qs.js"></script>
<script src="js/axios.js"></script>
<script src="js/jquery-3.4.1.min.js"></script>

<script>

       //记住转入搜索界面的第一个搜索参数  --绑定全部按钮
    let brand=sessionStorage.getItem("getBrand");
    let firstBrand=sessionStorage.getItem("firstBrand");
    let page=1;    //默认当前页
    let rows=8;
    let p=0;//价格点击
    let s=0;//销量点击
    let t=0;//新品点击
        let app=new Vue({
            el:"#yc-search",
            data:{
                phoneAll:{},     //搜索框智能匹配 所有产品型号
                topBrand:'',     //顶部分类参数
                searchBrand: '',//搜索框文本
                phoneTop:{},//顶部三个推荐型号
                phoneBottom:{},
                phones:{},     //总的数据
                pagePhones:{}, //分页的数据
                total:0,        //总数据数
                totalPage:0,    //总页数
                pageNo:1
            },

            mounted:function (){
                //发送多个请求
                axios.all([findBottom(),findPhones(),findAll()])
                .then(axios.spread((rs1,rs2,rs3)=>{
                    console.log(rs1);
                    console.log(rs2);
                    console.log(rs3);
                    this.phoneAll=rs3.data.phoneAll;        //存入所有手机型号
                    this.phoneBottom=rs1.data.phonesBottom;
                    this.phones=rs2.data.phones;  //第一页先将前8个存入pagePhones中 每页八个 默认第一页
                    this.total=rs2.data.total;
                    this.pagePhones=this.phones.slice(0,8);
                    // this.phoneTop=rs3.data.phonesTop;
                    // this.phoneTop=this.phones;//顶部分类推荐显示
                    // this.phoneTop.sort((a,b)=>a.pid-b.pid);//进行排列
                    // this.phoneTop=this.phoneTop.slice(0,3);//默认显示最新的三个型号
                    console.log(this.phoneTop);

                    if (this.total%rows==0){
                        this.totalPage=this.total/rows;
                    }else {
                        this.totalPage=parseInt(this.total/rows+"")+1;
                    }
                    console.log(this.totalPage);
                    console.log(this.pagePhones)


                }));
            },

            methods:{
                //分页                                                    //--重写分页方法                    //同过页码数i传入分页函数 来截取数据实现分页  slice(start,end)方法
                // findPage:function (pnum){                            // --2.删除DAO方法 limit参数
                //     this.pageNo=pnum;
                //     axios({
                //         url:"search",
                //         methods: "get",
                //         params:{brand:brand,page:this.pageNo,rows:rows,op:'findPage'}
                //     }).then(rs=>{
                //         this.phones=rs.data.phones;
                //     });
                // },

                findPage:function (pnum){
                    this.pageNo=pnum;
                    //起始位置  =（当前位置-1）*每页大小   ps:当点击第二页  传入2 那么起始位置为(2-1)*8=8
                    const start=(this.pageNo-1)*rows;
                    //结束位置  =当前页*每页的大小
                    const end=(this.pageNo)*rows;
                    this.pagePhones=this.phones.slice(start,end);
                    console.log(this.pagePhones);
                },


                //排序方法--1.按销量 2.按价格.3.按时间     //目前和分页栏有冲突--点分页按钮时会调用分页方法进行数据传导导致排序方法失效--解决:理论上按顺序先将分完页取得数据再将数据进行排序
                findSort:function (type){
                    switch (type) {
                        //按价格排序
                       case 1:
                       //每点击一次 ，
                        p++;
                        $("#video-items").empty();
                        //点一次升序，再点一次降序
                        if (p%2==0){
                            this.phones.sort((a,b)=>a.price-b.price);//点击排序方法后 默认从第一页排序 即返回第一页
                            this.findPage(1);
                        }  else {
                            this.phones.sort((a,b)=>b.price-a.price);
                            this.findPage(1);
                        }
                        break;
                        //按销量排序
                        case 2:
                        s++;
                        $("#video-items").empty();
                        if (s%2==0){
                            this.phones.sort((a,b)=>a.num-b.num);
                            this.findPage(1);
                        }else {
                            this.phones.sort((a,b)=>b.num-a.num);
                            this.findPage(1);
                        }
                        break;
                        //按时间排序--新品
                        case 3:
                            t++;
                            $("#video-items").empty();
                            if (t%2==0){
                                this.phones.sort((a,b)=>a.pid-b.pid);
                                this.findPage(1);
                            }else {
                                this.phones.sort((a,b)=>b.pid-a.pid);
                                this.findPage(1);
                            }
                        break;
                        default:break;
                    }
                },

                //标签选择  1.新品推荐 2.经典机型
                findByTag:function (num){
                    //1.新品推荐 查询当前品牌中最新的型号
                    switch (num){
                        //新品推荐
                        case 1:
                        $("#video-items").empty();
                        this.phones.sort((a,b)=>b.pid-a.pid); //先排序 大的pid排在前面
                        this.phones=this.phones.slice(0,5);               //推荐前五个
                        this.findPage(1);
                        break;
                        //经典机型
                        case 2:
                        this.phones.sort((a,b)=>a.num-b.num); //先排序 num为库存  库存越少代表卖的越多
                        this.phones=this.phones.slice(0,5);               //推荐前五个
                        this.findPage(1);
                        break;
                        default:break;
                    }

                },


                findBrand:function(){ //根据品牌名称搜索
                    console.log(this.searchBrand);
                    if (this.searchBrand==null||this.searchBrand==""){
                        alert("请输入搜索条件");
                    }else {
                        sessionStorage.setItem("getBrand", this.searchBrand);//将参数设置到session中

                        location.reload();//刷新页面


                        //需要判断搜索的内容 如果是搜索的品牌那么将
                    }
                },
              //搜索框下拉列表品牌
                selectBrand:function (brand){

                    if (brand=="全部"){ //全部标签
                        sessionStorage.setItem("getBrand",firstBrand);//以初次参数来获取全部内容
                        location.reload();
                    }else {
                    console.log(brand);
                    sessionStorage.setItem("getBrand",brand);
                    location.reload();
                }

                },
                //顶部推荐型号
                selectList:function (brand){ //下拉框默认品牌
                sessionStorage.setItem("getBrand",brand);
                sessionStorage.setItem("firstBrand",brand);
                location.reload();
                },
                //链接跳转至详情页面
                shiftDetail:function (id){
                    const baseUrl = 'plus5.html';
                    const pid = id;
                    var url = baseUrl +'#pid=' + pid;
                    document.getElementById('link').href = url;
                    window.location.href = url;
                },
                //底部猜你喜欢链接跳转至详情页面
                shiftBottomDetail:function (id){
                    const baseUrl = 'plus5.html';
                    const pid = id;
                    var url = baseUrl +'#pid=' + pid;
                    document.getElementById('Blink').href = url;
                    window.location.href = url;
                },


                //搜索框关键字匹配方法
                 searchFunction:function (){
                 //获取输入框中的文本
                 var searchText=document.getElementById("searchInput").value;
                 console.log(searchText);
                 //获取需要匹配的指定元素中的内容  先获取到
                 var content=document.getElementById("searchContent");//获取父节点
                 console.log(content);
                 //获取指定元素中的需要匹配的所有列表
                 // var items=content.getElementsByTagName("a"); //获取父节点下指定的子节点
                 var items=this.phoneAll;
                 console.log(items);
                 //清空结果显示区域
                 document.getElementById("searchContent").innerHTML="";
                 //遍历匹配元素列表
                 for (var i=0;i<items.length;i++){
                     var itemText=items[i].name;
                     console.log(itemText);
                     //判断元素文本是否包含搜索文本
                     if (itemText.includes(searchText)){
                         //创建匹配结果节点
                         var  resultItem=document.createElement("a");
                         //设置匹配结果节点的文本为元素文本
                         resultItem.innerText=itemText;   //a标签中的文本
                         var  resultName=itemText;
                         //将匹配结果节点添加到结果显示区域
                         console.log(resultItem);
                         var  element=document.getElementById('searchContent');
                         // element.appendChild(resultItem).setAttribute("href","#");
                         // element.appendChild(resultItem).setAttribute("v-on:click","selectBrand("+"'"+resultName.toString()+"'"+")");
                         element.appendChild(resultItem);
                         resultItem.setAttribute("href","#");
                         // resultItem.setAttribute("v-on:click","selectBrand("+"'"+resultName.toString()+"'"+")");
                         resultItem.setAttribute("onclick","clickFind("+"'"+resultName.toString()+"'"+")");
                         // document.getElementById('searchContent').appendChild(resultItem).setAttribute("v-on:click","selectBrand("+"'"+resultName.toString()+"'"+")");

                     }
                 }

                },
            }

        });

       let app3=new Vue({
           el:"#yc-header",
           data:{
               onlogin:false,
               outlogin:true,
               loginName:'匿名',
               id:'',
               goods:{},
               goodsCount:0,
               carts:{},
               type:{},
               provinceid:'',
               cityid:'',
               countyid:'',
               cityOp:'',
               countyOp:'',
               detailAdd:'',
               receiveName:'',
               receiveTel:'',
               checkGoodsCount:true,
               checkGoodsCountNotNull:false,
               showErrorTip1: false,
               showErrorTip2: false,
               showErrorTip3: false,
               provinceList:[
                   {"id": 1, "name": "湖南省"},
                   {"id": 2, "name": "福建省"},
                   {"id": 3, "name": "江西省"},
               ],
               cityList : [
                   {"id": "101", "name": "长沙市", "pid": 1},
                   {"id": "102", "name": "株洲市", "pid": 1},
                   {"id": "103", "name": "湘潭市", "pid": 1},
                   {"id": "104", "name": "邵阳市", "pid": 1},
                   {"id": "105", "name": "衡阳市", "pid": 1},

                   {"id": "201", "name": "福州市", "pid": 2},
                   {"id": "202", "name": "厦门市", "pid": 2},
                   {"id": "203", "name": "莆田市", "pid": 2},
                   {"id": "204", "name": "三明市", "pid": 2},
                   {"id": "205", "name": "宁德市", "pid": 2},

                   {"id": "301", "name": "南昌市", "pid": 3},
                   {"id": "302", "name": "萍乡市", "pid": 3},
                   {"id": "303", "name": "九江市", "pid": 3},
                   {"id": "304", "name": "新余市", "pid": 3},
                   {"id": "305", "name": "鹰潭市", "pid": 3}
               ],
               countyList :[
                   {"id": "10101", "name": "芙蓉区", "pid": 101},
                   {"id": "10102", "name": "长沙县", "pid": 101},
                   {"id": "10103", "name": "开福区", "pid": 101},
                   {"id": "10104", "name": "雨花区", "pid": 101},
                   {"id": "10105", "name": "望城区", "pid": 101},
                   {"id": "10106", "name": "宁乡市", "pid": 101},

                   {"id": "10201", "name": "荷塘区", "pid": 102},
                   {"id": "10202", "name": "石峰区", "pid": 102},
                   {"id": "10203", "name": "天元区", "pid": 102},
                   {"id": "10204", "name": "醴陵市", "pid": 102},
                   {"id": "10205", "name": "炎陵县", "pid": 102},
                   {"id": "10206", "name": "醴陵市", "pid": 102},

                   {"id": "10301", "name": "雨湖区", "pid": 103},
                   {"id": "10302", "name": "岳塘区", "pid": 103},
                   {"id": "10303", "name": "湘潭县", "pid": 103},
                   {"id": "10304", "name": "湘乡市", "pid": 103},
                   {"id": "10305", "name": "韶山市", "pid": 103},
                   {"id": "10306", "name": "其他区", "pid": 103},

                   {"id": "10401", "name": "双清区", "pid": 104},
                   {"id": "10402", "name": "大祥区", "pid": 104},
                   {"id": "10403", "name": "北塔区", "pid": 104},
                   {"id": "10404", "name": "邵东市", "pid": 104},
                   {"id": "10405", "name": "新邵县", "pid": 104},
                   {"id": "10406", "name": "邵阳县", "pid": 104},

                   {"id": "10501", "name": "珠晖区", "pid": 105},
                   {"id": "10502", "name": "雁峰区", "pid": 105},
                   {"id": "10503", "name": "石鼓区", "pid": 105},
                   {"id": "10504", "name": "蒸湘区", "pid": 105},
                   {"id": "10505", "name": "南岳区", "pid": 105},
                   {"id": "10506", "name": "衡阳县", "pid": 105},

                   {"id": "20101", "name": "鼓楼区", "pid": 201},
                   {"id": "20102", "name": "台江区", "pid": 201},
                   {"id": "20103", "name": "仓山区", "pid": 201},
                   {"id": "20104", "name": "马尾区", "pid": 201},
                   {"id": "20105", "name": "晋安区", "pid": 201},
                   {"id": "20106", "name": "闽侯县", "pid": 201},

                   {"id": "20201", "name": "思明区", "pid": 202},
                   {"id": "20202", "name": "海沧区", "pid": 202},
                   {"id": "20203", "name": "湖里区", "pid": 202},
                   {"id": "20204", "name": "集美区", "pid": 202},
                   {"id": "20205", "name": "同安区", "pid": 202},
                   {"id": "20206", "name": "翔安区", "pid": 202},

                   {"id": "20301", "name": "城厢区", "pid": 203},
                   {"id": "20302", "name": "涵江区", "pid": 203},
                   {"id": "20303", "name": "荔城区", "pid": 203},
                   {"id": "20304", "name": "秀屿区", "pid": 203},
                   {"id": "20305", "name": "仙游县", "pid": 203},
                   {"id": "20306", "name": "其它区", "pid": 203},

                   {"id": "20401", "name": "三元区", "pid": 204},
                   {"id": "20402", "name": "明溪县", "pid": 204},
                   {"id": "20403", "name": "清流县", "pid": 204},
                   {"id": "20404", "name": "宁化县", "pid": 204},
                   {"id": "20405", "name": "大田县", "pid": 204},
                   {"id": "20406", "name": "尤溪县", "pid": 204},

                   {"id": "20501", "name": "蕉城区", "pid": 205},
                   {"id": "20502", "name": "霞浦县", "pid": 205},
                   {"id": "20503", "name": "古田县", "pid": 205},
                   {"id": "20504", "name": "屏南县", "pid": 205},
                   {"id": "20505", "name": "寿宁县", "pid": 205},
                   {"id": "20506", "name": "周宁县", "pid": 205},

                   {"id": "30101", "name": "东湖区", "pid": 301},
                   {"id": "30102", "name": "西湖区", "pid": 301},
                   {"id": "30103", "name": "青云谱区", "pid": 301},
                   {"id": "30104", "name": "青山湖区", "pid": 301},
                   {"id": "30105", "name": "南昌县", "pid": 301},
                   {"id": "30106", "name": "新建区", "pid": 301},

                   {"id": "30201", "name": "安源区", "pid": 302},
                   {"id": "30202", "name": "湘东区", "pid": 302},
                   {"id": "30203", "name": "莲花县", "pid": 302},
                   {"id": "30204", "name": "上栗县", "pid": 302},
                   {"id": "30205", "name": "芦溪县", "pid": 302},
                   {"id": "30206", "name": "其它区", "pid": 302},

                   {"id": "30301", "name": "濂溪区", "pid": 303},
                   {"id": "30302", "name": "浔阳区", "pid": 303},
                   {"id": "30303", "name": "柴桑区", "pid": 303},
                   {"id": "30304", "name": "武宁县", "pid": 303},
                   {"id": "30305", "name": "修水县", "pid": 303},
                   {"id": "30306", "name": "永修县", "pid": 303},

                   {"id": "30401", "name": "渝水区", "pid": 304},
                   {"id": "30401", "name": "分宜县", "pid": 304},
                   {"id": "30401", "name": "其它区", "pid": 304},

                   {"id": "30201", "name": "月湖区", "pid": 305},
                   {"id": "30202", "name": "余江区", "pid": 305},
                   {"id": "30203", "name": "贵溪市", "pid": 305},
                   {"id": "30204", "name": "其它区", "pid": 305},
               ]
           },
           mounted:function (){
               sessionStorage.setItem("id",this.id);//用户id
               sessionStorage.setItem("username",this.loginName);//用户名字
               sessionStorage.setItem("carts",this.carts);//用户购物车
               sessionStorage.setItem("onlogin",this.onlogin);//登录状态



               //检查是否登录
               axios.all([checkLogin()]).then(axios.spread((rs1)=>{
                   console.log(rs1);
                   if (rs1.data.code==0){
                       //说明未登录
                       this.onlogin=false;
                       this.outlogin=true;
                   }else {
                       //登录成功
                       this.loginName=rs1.data.user.username;
                       this.carts=rs1.data.carts;
                       this.id=rs1.data.user.id;

                       this.onlogin=true;
                       this.outlogin=false;

                       sessionStorage.setItem("id",this.id);// 登录后存入用户id
                       sessionStorage.setItem("username",this.loginName);




                       //从session中获取购物车商品数量
                       for (let i=0;i<this.carts.length;i++){
                           this.goodsCount+=this.carts[i].num;
                       }
                       //购物车的显示与暂无数据
                       this.checkGoodsCountWay();
                       this.checkGoodsCountNotNullWay();

                       //购物车数据
                       this.goods=this.carts;
                       console.log(this.goods);
                   }
               }));
           },
           methods:{
               //退出按钮
               quit:function (){
                   this.onlogin=false;
                   this.outlogin=true;

               },
               //添加地址按钮
               addAddress:function (){
                   //判断是否登录
                   if (this.outlogin){
                       alert('请先登录后再添加地址');
                       location.href="login.html";
                   }else {
                       let pid = this.provinceid;
                       let  obj1=this.provinceList[pid-1].name;
                       let  obj2 = this.cityList.filter(item  =>  item.id  ===  this.cityid).map(item  =>  item.name);
                       let  obj3=this.countyList.filter(item  =>  item.id  ===  this.countyid).map(item  =>  item.name);
                       let pro2=obj2.join();
                       let pro3=obj3.join();

                       if (this.checkInput1() && this.checkInput2() && this.checkInput3()){
                           axios.get("phone",{
                               params:{
                                   op:'addAddress',
                                   id:this.id,
                                   province:obj1,
                                   city:pro2,
                                   county:pro3,
                                   detailAdd: this.detailAdd,
                                   receiveName: this.receiveName,
                                   receiveTel: this.receiveTel
                               }

                           }).then(rs=>{
                               if (rs.data==1){
                                   alert("地址添加成功");
                                   this.detailAdd='';
                                   this.receiveName='';
                                   this.receiveTel='';
                                   this.provinceid='';
                                   this.cityid='';
                                   this.countyid='';
                               }else {
                                   alert("地址添加失败");
                               }
                           })
                       }else {
                           alert('请检查是否填写正确');
                       }
                   }


               },
               //添加地址中的省份与城市改变后的代码
               changeCity:function(){
                   var str='';
                   for (var i = 0; i < cityList.length; i++) {
                       if (cityList[i].pid == this.provinceid) {
                           str+='<option value="'+cityList[i].id+'">'+cityList[i].name+'</option>';
                       }
                   }
                   this.cityOp=str;
               },
               changeCounty:function (){
                   var str='';
                   for (var i=0;i<countyList.length;i++){
                       if (countyList[i].pid==this.cityid){
                           str+='<option value="'+countyList[i].id+'">'+countyList[i].name+'</option>';
                       }
                   }
                   this.countyOp=str;
               },
               //添加地址中的详细地址判断
               checkInput1(){
                   const address=this.detailAdd.trim();
                   const isLengthValid=address.length>=5 && address.length<=120;
                   const isName=/^[\u4e00-\u9fa5a-zA-Z0-9]+$/.test(address);//判断是否为中文或英文或数字
                   this.showErrorTip1= !isLengthValid || !isName ;
               },
               //添加地址中的收货人姓名判断
               checkInput2(){
                   const receiveName=this.receiveName.trim();
                   console.log(receiveName.length);
                   const isLengthValid=receiveName.length>=2 && receiveName.length<=25;
                   const isName=/^[\u4e00-\u9fa5a-zA-Z]+$/.test(receiveName);//判断是否为中文或英文
                   this.showErrorTip2= !isLengthValid || !isName ;
               },
               //添加地址中的电话号码判断
               checkInput3() {
                   const phoneNumber = this.receiveTel.trim();
                   const isNumber = /^\d+$/.test(phoneNumber);
                   const isLengthValid = phoneNumber.length === 11;
                   const isFirstDigitValid = phoneNumber.charAt(0) === '1';
                   this.showErrorTip3 = !isNumber || !isLengthValid || !isFirstDigitValid ;
               },
               //当购物车中的商品数为0时
               checkGoodsCountWay(){
                   let checkCount= this.goodsCount!=0;
                   if (checkCount){
                       this.checkGoodsCount=false;
                   }
               },
               //当购物车中的商品数不为0时
               checkGoodsCountNotNullWay(){
                   let checkCount= this.goodsCount!=0;
                   if (checkCount){
                       this.checkGoodsCountNotNull=true;
                   }
               }

           }

       });


       //检查用户是否登录
       function checkLogin(){
           return axios.get("user?op=check");
       }


       //底部部分参数方法
    function findBottom(){
        return axios.get("bottom?op=findBottom")
    }


 //根据页面跳转URL带过来的品牌名进行查询商品
    function findPhones(){
     return axios({
         url:"search",
         method:"get",
         params: {brand:brand,page:page,rows:rows,op: "findPage"}

     });
    }

    //顶部分类部分 默认显示每个品牌最新的前三个型号 //是否可以在前端进行比较然后渲染在页面上
    //
    //    function findTop(){
    //        return axios({
    //            url:"top",
    //            method:"get",
    //            params: {brand:firstBrand,page:page,rows:rows,op: "findTop"}
    //        });
    //    }

       function findAll(){
           return axios.get("find?op=findAll")
       }

       //搜索框智能匹配标签方法
       function clickFind(name){
           sessionStorage.setItem("getBrand",name);
           location.reload();

       }







</script>



</body>
</html>